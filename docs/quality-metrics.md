# Quality Metrics Guide

This document describes the key performance indicators (KPIs) used to track code and application quality, as well as the tools used to gather them.

## KPIs

- **Test coverage** – Percentage of lines covered by automated tests.
- **Build time** – Duration of CI builds for both Python and frontend workflows.
- **Core Web Vitals** – Metrics such as Largest Contentful Paint (LCP) and Cumulative Layout Shift (CLS) measured on the built dashboard.
- **Bug rate** – Number of open issues labeled `bug`.
- **Security vulnerabilities** – High or critical issues detected in dependencies.
- **Lead time** – Time from merge to deploy.
- **MTTR** – Mean time to recovery after incidents.
- **Bug escape rate** – Defects found in production versus total defects.

## Collection Methods

| KPI                    | Tool/Source              | Notes |
| ---------------------- | ------------------------ | ----- |
| Coverage               | **Codecov**              | Coverage reports generated by `pytest --cov` are uploaded and tracked on [Codecov](https://about.codecov.io/). |
| Build time             | **GitHub Actions**       | CI logs expose the total runtime for each job; historical data is visible in the Actions tab. |
| Core Web Vitals        | **Lighthouse‑CI**        | `@lhci/cli` runs against the deployed dashboard and stores JSON reports. |
| Bug rate               | **GitHub Issues**        | Count of open issues with the label `bug`. |
| Vulnerabilities        | **Snyk / CodeQL**        | Weekly scans report dependency and code risks. |
| Lead time              | **GitHub API**           | Difference between merge timestamp and deployment tag. |
| MTTR                   | **Incident tracker**     | Average resolution time extracted from GLPI issues. |
| Bug escape rate        | **Post-deploy tests**    | Ratio of production defects to total defects. |

Metrics collected by the workflow are posted to a Slack channel (or any compatible webhook) for visibility.

Example GitHub Action step:

```yaml
  - name: Notify Slack
    uses: slackapi/slack-github-action@v1.24.0
    with:
      payload: |
        {
          "text": "Coverage: ${{ env.coverage }}\nLead time: ${{ env.lead_time }}\nMTTR: ${{ env.mttr }}"
        }
    env:
      SLACK_WEBHOOK_URL: ${{ secrets.SLACK_WEBHOOK_URL }}
```
